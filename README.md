# –ü–∞—Ç—Ç–µ—Ä–Ω "–°–æ—Å—Ç–æ—è–Ω–∏–µ" *(State)*
### –¢–∏–ø: **–ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π**


üë®‚Äçüíª –ü–∞—Ç—Ç–µ—Ä–Ω **"–°–æ—Å—Ç–æ—è–Ω–∏–µ"** *(State)* –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–º –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç—É
–∏–∑–º–µ–Ω—è—Ç—å —Å–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –Ω–µ –º–µ–Ω—è—è —Å–≤–æ–µ–≥–æ –∫–ª–∞—Å—Å–∞. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –≤ —Å–ª—É—á–∞—è—Ö,
–∫–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö –∏ –∫–∞–∂–¥–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –µ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.

–ù–∞ –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–æ—Å—Ç–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∞ –ø–æ –≤—ã–¥–∞—á–µ –∂–µ–≤–∞—Ç–µ–ª—å–Ω–æ–π —Ä–µ–∑–∏–Ω–∫–∏ üç¨ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω –≤–∞—Ä–∏–∞–Ω—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω–æ–≥–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞.

üíª –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è *'before'* —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–∞—Ä–∏–∞–Ω—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ –∫–æ–¥–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∞.

üíª –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ *'after'* –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∫–æ–¥, –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –≤ —Ä–∞–º–∫–∞—Ö –¥–∞–Ω–Ω–æ–≥–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞.

–ù–∏–∂–µ –ø–æ–π–¥–µ—Ç —Ä–µ—á—å –ø—Ä–æ –¥–∞–Ω–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –Ω–∞ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ.


üîß –î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ **"–°–æ—Å—Ç–æ—è–Ω–∏–µ"** –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∏ –∫–ª–∞—Å—Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞,
–∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π. –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞,
–æ–±—ä–µ–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –∏–∑–º–µ–Ω—è–µ—Ç —Å–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.

üë®‚Äçüíª –í–æ—Ç –ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω–æ–≥–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞:

1. –°–æ–∑–¥–∞–µ–º –∫–ª–∞—Å—Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π

    ```
    public class Context {
       private State stateA;
       private State stateB;
       private State currentState;

       public Context() {
       // –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∫–ª–∞—Å—Å–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è 
       // –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.
       // –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –∫–ª–∞—Å—Å–æ–≤ –ø–µ—Ä–µ–¥–∞–µ–º
       // –∏–º –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –æ–±—ä–µ–∫—Ç —Ç–µ–∫—É—â–µ–≥–æ –∫–ª–∞—Å—Å–∞.
   
        this.stateA = new ConcreteStateA(this);
        this.stateB = new ConcreteStateB(this);   
        this.currentState = stateA;
       }
   
       // –°–æ–∑–¥–∞–µ–º –≥–µ—Ç—Ç–µ—Ä—ã –¥–ª—è –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤
       // –∏ —Å–µ—Ç—Ç–µ—Ä –¥–ª—è –æ–±—ä–µ–∫—Ç–∞ 'currentState'.
   
       public State getCurrentState(){
         return currentState;
       }
   
       public void setCurrentState(State state){
         this.state = state;
       }
   
       public State getStateA(){
         return stateA;
       }
   
       public State getStateB(){
         return stateB;
       }

       // –ú–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
       // –í –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ –æ–Ω –ø—Ä–æ—Å—Ç–æ –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.
       public void request() {
         currentState.changeState();
       }
    }
    ```
2. –°–æ–∑–¥–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–ª–∞—Å—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
    ```
    public interface State {
       void changeState();
    }
    ```

3. –°–æ–∑–¥–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ê
    ```
    public class ConcreteStateA implements State {
      private Context context;
   
      public ConcreteStateA(Context context){
         this.context = context;
      }
    
      @Override
       public void changeState() {
           // –í—ã–ø–æ–ª–Ω—è–µ–º –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ê
           System.out.println("–í—ã–ø–æ–ª–Ω—è–µ–º –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ê");
           // –ò–∑–º–µ–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
           context.setCurrentState(context.getStateB());
       }
    }
    ```
4. –°–æ–∑–¥–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ B
    ```
    public class ConcreteStateB implements State {
      private Context context;
   
      public ConcreteStateB(Context context){
         this.context = context;
      }
   
       @Override
       public void changeState() {
           // –í—ã–ø–æ–ª–Ω—è–µ–º –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è B
           System.out.println("–í—ã–ø–æ–ª–Ω—è–µ–º –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è B");
           // –ò–∑–º–µ–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
           context.setCurrentState(context.getStateA());
       }
    }
    ```
5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
    ```
    public class Main {
       public static void main(String[] args) {
           Context context = new Context();
           context.request(); // –í—ã–ø–æ–ª–Ω—è–µ–º –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ê
           context.request(); // –í—ã–ø–æ–ª–Ω—è–µ–º –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è B
           context.request(); // –í—ã–ø–æ–ª–Ω—è–µ–º –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ê
       }
    }
    ```

üë®‚Äçüíª –í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã —Å–æ–∑–¥–∞–ª–∏ –∫–ª–∞—Å—Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ *(Context)*, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
–≤–æ–∑–º–æ–∂–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π. –ú—ã —Ç–∞–∫–∂–µ —Å–æ–∑–¥–∞–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è *(State)* –∏ –¥–≤–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è
*(ConcreteStateA –∏ ConcreteStateB)*. –ö–æ–≥–¥–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ *request()*, –æ–±—ä–µ–∫—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ.

üîß –ü–∞—Ç—Ç–µ—Ä–Ω **"–°–æ—Å—Ç–æ—è–Ω–∏–µ"** –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –≤–æ –º–Ω–æ–≥–∏—Ö –æ–±–ª–∞—Å—Ç—è—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∏–≥—Ä–æ–≤—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö
–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: –±–µ–≥, –ø—Ä—ã–∂–æ–∫, –∞—Ç–∞–∫–∞).
